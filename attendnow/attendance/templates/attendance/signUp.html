{% extends 'attendance/base.html' %}

{% load static %}

{% block title %}Sign Up{% endblock %}

{% block content %}
<<<<<<< HEAD
<div style="display: flex; justify-content: center; align-items: center; height: calc(100vh - 120px); background: white;">
    <div style="background-color: #002B5B; border-radius: 20px; padding: 40px; text-align: center; width: 600px; color: white; box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);">
        <img src="{% static 'attendnow/static/AttendNowLogo.png' %}" alt="Logo" style="width: 184px; height: 172px; margin-bottom: 20px;">
        <h1 style="margin-bottom: 20px; font-size: 2.5em; font-weight: 600;">Sign Up</h1>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <input type="text" placeholder="First Name" style="padding: 15px; border: none; border-radius: 20px; font-size: 1em; font-weight: 400;">
            <input type="text" placeholder="Last Name" style="padding: 15px; border: none; border-radius: 20px; font-size: 1em; font-weight: 400;">
            <input type="email" placeholder="Email" style="padding: 15px; border: none; border-radius: 20px; font-size: 1em; font-weight: 400;">
            <input type="text" placeholder="Username" style="padding: 15px; border: none; border-radius: 20px; font-size: 1em; font-weight: 400;">
            <input type="password" placeholder="Password" style="padding: 15px; border: none; border-radius: 20px; font-size: 1em; font-weight: 400;">
            <input type="password" placeholder="Confirm Password" style="padding: 15px; border: none; border-radius: 20px; font-size: 1em; font-weight: 400;">
        </div>
        <button style="width: 100%; padding: 15px; margin: 20px 0; background: #007ACC; border: none; border-radius: 20px; color: white; font-size: 1em; cursor: pointer; font-weight: 600; box-shadow: 0px 2px 4px rgba(0,0,0,0.2);">Create Account</button>
        <div style="margin: 20px 0; font-size: 1.2em; font-weight: 600;">---------- OR ----------</div>
        <button style="background: #ffffff; color: #757575; display: inline-flex; align-items: center; justify-content: center; width: calc(100% - 20px); padding: 10px; margin: 20px 0; border: 1px solid #ccc; border-radius: 5px; font-size: 1em; cursor: pointer; font-weight: 600; box-shadow: 0 3px 6px rgba(0,0,0,0.1);">
            <img src="{% static 'attendnow/static/google_logo.png' %}" alt="Google Logo" style="width: 20px; height: 20px; margin-right: 10px;">
            Sign in with Google
        </button>
            Already have an account? <a href="{% url 'sign_in' %}" style="color: white; text-decoration: none; font-weight: 600;">Sign In</a>
        </div>
    </div>
=======
<div class="form-container">
    <div class="logo">
    </div>
    <h1>Sign Up</h1>
    <form id="register-form" method="post" enctype="multipart/form-data" onsubmit="handleRegister(event)">
        {% csrf_token %}
        <div class="form-group">
            <label for="full_name">Full Name:</label>
            <input type="text" id="full_name" name="full_name" required>
        </div>
        <div class="form-group">
            <label for="university_id">University ID:</label>
            <input type="text" id="university_id" name="university_id" required>
        </div>
        <div class="form-group">
            <label for="password">Password:</label>
            <input type="password" id="password" name="password" required>
        </div>
        <div class="form-group">
            <label for="photo">Photo:</label>
            <input type="file" id="photo" name="photo" accept="image/*" required>
        </div>
        <button type="submit" class="btn">Register</button>
    </form>
    <div id="error-message" class="error-message"></div>
>>>>>>> 90d8ae8af7782acdbc4da0b5e6fb189f23ddc77d
</div>

<script>
async function handleRegister(event) {
    event.preventDefault();  // Prevent form from submitting the default way

    const full_name = document.getElementById('full_name').value;
    const university_id = document.getElementById('university_id').value;
    const password = document.getElementById('password').value;
    const photo = document.getElementById('photo').files[0];

    const formData = new FormData();
    formData.append('full_name', full_name);
    formData.append('university_id', university_id);
    formData.append('password', password);
    formData.append('photo', photo);

    const response = await fetch('/api/register/', {
        method: 'POST',
        headers: {
            'X-CSRFToken': '{{ csrf_token }}',
        },
        body: formData
    });

    const data = await response.json();

    if (response.ok) {
        alert(data.message);
        // Redirect or perform further actions
        window.location.href = '/sign_in';
    } else {
        document.getElementById('error-message').innerText = data.detail || 'Registration failed. Please check your details.';
    }
}
</script>
{% endblock %}
